<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Orders - Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-6 bg-gray-100">
  <h1 class="text-2xl font-bold mb-4 text-green-800">ðŸ“¦ Orders</h1>
  <table class="w-full bg-white shadow rounded-lg overflow-hidden">
    <thead class="bg-green-100">
      <tr>
        <th class="p-3">Customer</th>
        <th class="p-3">Items</th>
        <th class="p-3">Vendor</th>
        <th class="p-3">Status</th>
        <th class="p-3">Action</th>
      </tr>
    </thead>
    <tbody id="orderList"></tbody>
  </table>

  <script>
    fetch('/admin/orders')
      .then(res => res.json())
      .then(data => {
        const list = document.getElementById('orderList');
        list.innerHTML = '';
        data.forEach(order => {
          list.innerHTML += `
            <tr class="border-b">
              <td class="p-3">${order.customerName || 'N/A'}<br>${order.customerPhone}</td>
              <td class="p-3">${order.items.map(i => i.name).join(', ')}</td>
              <td class="p-3">${order.vendor?.businessName || 'N/A'}</td>
              <td class="p-3">${order.status}</td>
              <td class="p-3">
                <button onclick="deleteOrder('${order._id}')" class="bg-red-500 text-white px-3 py-1 rounded">Delete</button>
              </td>
            </tr>`;
        });
      });

    function deleteOrder(id) {
      if (!confirm('Delete this order?')) return;
      fetch(`/admin/orders/${id}`, { method: 'DELETE' }).then(() => location.reload());
    }
  </script>
</body>
</html>
